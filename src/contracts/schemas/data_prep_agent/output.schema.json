{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "test_data_agent_output",
  "title": "TestDataAgent Output Contract",
  "description": "Output from the TestData Agent - summary of test dataset exported to JSONL file. The actual test entries (with HTML content) are in the exported file, NOT returned in this response to avoid token bloat.",
  "type": "object",
  "required": [
    "test_data_description",
    "export_path",
    "listing_count",
    "article_count"
  ],
  "properties": {
    "test_data_description": {
      "type": "string",
      "description": "Human-readable summary of test data created"
    },
    "export_path": {
      "type": "string",
      "description": "Path where JSONL file was exported (e.g., 'data/test_set.jsonl'). The file contains full test entries with HTML content."
    },
    "listing_count": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of listing entries exported to file"
    },
    "article_count": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of article entries exported to file"
    },
    "pages_fetched": {
      "type": "object",
      "description": "Statistics about pages fetched",
      "properties": {
        "listing_pages": {
          "type": "integer",
          "description": "Number of listing pages fetched"
        },
        "article_pages": {
          "type": "integer",
          "description": "Number of article pages fetched"
        }
      }
    },
    "sample_urls": {
      "type": "object",
      "description": "Sample URLs from the test data (for verification without loading full HTML)",
      "properties": {
        "listing_urls": {
          "type": "array",
          "items": { "type": "string", "format": "uri" },
          "maxItems": 3,
          "description": "Sample of listing page URLs (max 3)"
        },
        "article_urls": {
          "type": "array",
          "items": { "type": "string", "format": "uri" },
          "maxItems": 5,
          "description": "Sample of article page URLs (max 5)"
        }
      }
    }
  },
  "additionalProperties": false
}
